=====================
CosmicFish: test suite
=====================

This folder contains the CosmicFish test suite.

The purpose of this code is to test wether the CosmicFish libraries are correctly compiled.
This set of applications is also used by CosmicFish developers to make sure that the code is working properly and that changes introduced do not compromise the results of the code or its stability.

1. CosmicFish test requirements:
===============================

The test suite requires numdiff to properly work and is based on a set of bash scripts.

2. Running tests:
=================

To run the test suite, after compiling it with the main CosmicFish Makefile issue::

	make test

in this folder.
This will run all the test reporting the passed and not passed.

3. Adding a test:
=================

When adding a function to the CosmicFish source code a test specifically designed for that function should be added to the test suite.

To add a new test simply add the sourcefile in the test_source folder.
It is a good practice to use the number of source file to which the test refers to in the name of the test.
If the test needs some input create one and put it in the folder test_input with the same name of the test but with the extension .input
The expected output of the test shall then be placed in the folder test_output.

4. Replacing baseline results:
==============================

By running the command::

	make create_legacy

the test script will run all the test and replace the output file with the one generated by the code.
This will totally overwrite the previous results so this command is dangerous to use. Use it with care.
